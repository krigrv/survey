<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORS Test</title>
</head>
<body>
    <h1>CORS Test Page</h1>
    <p>Testing different script loading methods:</p>
    
    <div id="test-results">
        <h3>Test Results:</h3>
        <div id="relative-path-test">Relative path test: <span id="relative-result">Loading...</span></div>
        <div id="absolute-path-test">Absolute path test: <span id="absolute-result">Loading...</span></div>
    </div>

    <script>
        // Test 1: Relative path
        const script1 = document.createElement('script');
        script1.src = '/popup/embed.js';
        script1.setAttribute('data-form-id', '64a1b2c3d4e5f6789012345');
        script1.onload = () => {
            document.getElementById('relative-result').textContent = 'SUCCESS';
            document.getElementById('relative-result').style.color = 'green';
        };
        script1.onerror = (e) => {
            document.getElementById('relative-result').textContent = 'FAILED: ' + e.message;
            document.getElementById('relative-result').style.color = 'red';
        };
        document.head.appendChild(script1);

        // Test 2: Absolute URL (after a delay)
        setTimeout(() => {
            const script2 = document.createElement('script');
            script2.src = 'http://localhost:3001/popup/embed.js';
            script2.setAttribute('data-form-id', '64a1b2c3d4e5f6789012346');
            script2.onload = () => {
                document.getElementById('absolute-result').textContent = 'SUCCESS';
                document.getElementById('absolute-result').style.color = 'green';
            };
            script2.onerror = (e) => {
                document.getElementById('absolute-result').textContent = 'FAILED: ' + e.message;
                document.getElementById('absolute-result').style.color = 'red';
            };
            document.head.appendChild(script2);
        }, 2000);
    </script>
</body>
</html>